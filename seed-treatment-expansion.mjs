import { drizzle } from "drizzle-orm/mysql2";
import { treatmentCenters } from "./drizzle/schema.ts";
import dotenv from "dotenv";

dotenv.config();

const db = drizzle(process.env.DATABASE_URL);

const expansionCenters = [
  // ORANGE COUNTY
  {
    name: "Orange County Health Care Agency - Behavioral Health Services",
    type: "outpatient",
    address: "405 W. 5th Street, Suite 354",
    city: "Santa Ana",
    zipCode: "92701",
    phone: "(855) 625-4657",
    website: "https://www.ochealthinfo.com/",
    description: "County-run DMC-ODS provider. Free assessment and linkage to treatment. Outpatient, IOP, residential, and MAT services. No insurance required.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: false,
    acceptsRBH: false,
    priceRange: "Free",
    servicesOffered: JSON.stringify(["Assessment", "Outpatient", "IOP", "Residential Referral", "MAT", "Case Management"]),
    amenities: JSON.stringify(["Walk-In Welcome", "Spanish Services", "LGBTQ+ Affirming"]),
    isJointCommission: false,
    latitude: "33.7455",
    longitude: "-117.8677",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Laguna Treatment Hospital",
    type: "detox",
    address: "24552 Pacific Park Drive",
    city: "Aliso Viejo",
    zipCode: "92656",
    phone: "(949) 329-4300",
    website: "https://lagunatreatment.com/",
    description: "Medical detox and residential treatment. Accepts Medi-Cal for detox services. Dual diagnosis specialty. Beautiful Orange County facility.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: false,
    priceRange: "Medi-Cal covers detox",
    servicesOffered: JSON.stringify(["Medical Detox", "Residential", "Dual Diagnosis", "MAT"]),
    amenities: JSON.stringify(["24/7 Medical Staff", "Private Rooms", "Holistic Therapies"]),
    isJointCommission: true,
    latitude: "33.5676",
    longitude: "-117.7257",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Liftoff Recovery - Anaheim",
    type: "outpatient",
    address: "1940 E. Deere Avenue, Suite 120",
    city: "Santa Ana",
    zipCode: "92705",
    phone: "(714) 584-4237",
    website: "https://liftoffrecovery.com/",
    description: "Outpatient and IOP services. Accepts Medi-Cal and most insurance. Young adult specialty programs. Evidence-based treatment.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: false,
    priceRange: "Covered by Medi-Cal",
    servicesOffered: JSON.stringify(["Outpatient", "IOP", "PHP", "MAT", "Family Therapy"]),
    amenities: JSON.stringify(["Young Adult Focus", "Alumni Program", "Flexible Scheduling"]),
    isJointCommission: false,
    latitude: "33.7175",
    longitude: "-117.8311",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Waymakers - Orange County",
    type: "residential",
    address: "Multiple Locations",
    city: "Fullerton",
    zipCode: "92832",
    phone: "(714) 879-0144",
    website: "https://www.waymakers.org/",
    description: "Residential treatment for women and women with children. Medi-Cal certified. Comprehensive wrap-around services including childcare and job training.",
    servesPopulation: "women_with_children",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Free with Medi-Cal",
    servicesOffered: JSON.stringify(["Residential", "Childcare", "Parenting", "Job Training", "Mental Health"]),
    amenities: JSON.stringify(["On-Site Childcare", "Trauma-Informed", "Transportation Assistance"]),
    isJointCommission: false,
    latitude: "33.8704",
    longitude: "-117.9242",
    isVerified: true,
    isPublished: true,
  },
  
  // SAN DIEGO COUNTY
  {
    name: "San Diego County Access & Crisis Line",
    type: "outpatient",
    address: "Various Locations",
    city: "San Diego",
    zipCode: "92101",
    phone: "(888) 724-7240",
    website: "https://www.sandiegocounty.gov/hhsa/programs/bhs/",
    description: "24/7 crisis line and assessment center. Links to DMC-ODS providers throughout San Diego County. Free services for uninsured and Medi-Cal members.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: false,
    acceptsRBH: false,
    priceRange: "Free",
    servicesOffered: JSON.stringify(["Crisis Services", "Assessment", "Linkage to Treatment", "Mobile Crisis"]),
    amenities: JSON.stringify(["24/7 Hotline", "Spanish Services", "Walk-In Welcome"]),
    isJointCommission: false,
    latitude: "32.7157",
    longitude: "-117.1611",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Family Health Centers of San Diego",
    type: "outpatient",
    address: "Multiple Locations",
    city: "San Diego",
    zipCode: "92102",
    phone: "(619) 515-2300",
    website: "https://www.fhcsd.org/",
    description: "Community health centers with integrated SUD services. Medi-Cal certified. Outpatient, MAT, and mental health services. Multiple locations throughout San Diego.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: true,
    acceptsRBH: false,
    priceRange: "Sliding scale, free with Medi-Cal",
    servicesOffered: JSON.stringify(["Outpatient", "MAT", "Mental Health", "Primary Care", "Case Management"]),
    amenities: JSON.stringify(["Integrated Care", "Spanish Services", "LGBTQ+ Affirming"]),
    isJointCommission: true,
    latitude: "32.7157",
    longitude: "-117.1611",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "McAlister Institute",
    type: "residential",
    address: "7420 Convoy Court",
    city: "San Diego",
    zipCode: "92111",
    phone: "(858) 569-7191",
    website: "https://www.mcalisterinstitute.org/",
    description: "Residential and outpatient treatment. Accepts Medi-Cal. Programs for adults, youth, and families. Trauma-informed care and dual diagnosis specialty.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Covered by Medi-Cal",
    servicesOffered: JSON.stringify(["Residential", "Outpatient", "Youth Services", "Family Therapy", "Dual Diagnosis"]),
    amenities: JSON.stringify(["Trauma-Informed", "Gender-Specific Programs", "Alumni Support"]),
    isJointCommission: true,
    latitude: "32.8231",
    longitude: "-117.1550",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Stepping Stone of San Diego",
    type: "sober_living",
    address: "3767 Fourth Avenue",
    city: "San Diego",
    zipCode: "92103",
    phone: "(619) 497-0568",
    website: "https://www.steppingstonesandiego.org/",
    description: "Sober living for men and women (separate facilities). Affordable rates. Structured environment with 12-step focus. Near public transportation.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: false,
    acceptsMedicare: false,
    acceptsPrivateInsurance: false,
    acceptsRBH: true,
    priceRange: "$700-$1000/month",
    servicesOffered: JSON.stringify(["Sober Living", "12-Step Meetings", "Drug Testing", "Life Skills"]),
    amenities: JSON.stringify(["Furnished Rooms", "Near Transit", "Job Assistance"]),
    isJointCommission: false,
    latitude: "32.7488",
    longitude: "-117.1601",
    isVerified: true,
    isPublished: true,
  },
  
  // RIVERSIDE COUNTY
  {
    name: "Riverside University Health System - Behavioral Health",
    type: "outpatient",
    address: "4095 County Circle Drive",
    city: "Riverside",
    zipCode: "92503",
    phone: "(800) 706-7500",
    website: "https://www.ruhealth.org/behavioral-health/",
    description: "County DMC-ODS provider. Free assessment and treatment for uninsured and Medi-Cal members. Outpatient, residential, MAT, and crisis services.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: false,
    acceptsRBH: false,
    priceRange: "Free",
    servicesOffered: JSON.stringify(["Assessment", "Outpatient", "Residential Referral", "MAT", "Crisis Services"]),
    amenities: JSON.stringify(["24/7 Crisis Line", "Spanish Services", "Walk-In Welcome"]),
    isJointCommission: false,
    latitude: "33.9533",
    longitude: "-117.3962",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "MFI Recovery Center",
    type: "outpatient",
    address: "6955 Brockton Avenue",
    city: "Riverside",
    zipCode: "92506",
    phone: "(800) 499-2066",
    website: "https://mfirecovery.com/",
    description: "Nonprofit community health center. Accepts Medi-Cal and IEHP. Outpatient, IOP, and family therapy. Integrated mental health and primary care.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Covered by Medi-Cal/IEHP",
    servicesOffered: JSON.stringify(["Outpatient", "IOP", "Family Therapy", "Mental Health", "Primary Care"]),
    amenities: JSON.stringify(["Integrated Care", "Spanish Services", "Youth Programs"]),
    isJointCommission: false,
    latitude: "33.9806",
    longitude: "-117.3275",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Riverside Recovery Resources",
    type: "outpatient",
    address: "4250 Brockton Avenue",
    city: "Riverside",
    zipCode: "92501",
    phone: "(951) 686-4402",
    website: "https://www.rrr.org/",
    description: "Nonprofit treatment provider since 1985. Accepts Medi-Cal and IEHP. Outpatient, DUI programs, and recovery support services.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Sliding scale, covered by Medi-Cal",
    servicesOffered: JSON.stringify(["Outpatient", "DUI Programs", "IOP", "Recovery Support", "Case Management"]),
    amenities: JSON.stringify(["Flexible Scheduling", "Alumni Support", "Community Referrals"]),
    isJointCommission: false,
    latitude: "33.9533",
    longitude: "-117.3962",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Inland Empire Health Plan (IEHP) - Substance Use Services",
    type: "outpatient",
    address: "Various Network Providers",
    city: "Rancho Cucamonga",
    zipCode: "91730",
    phone: "(866) 294-4347",
    website: "https://www.iehp.org/",
    description: "Medi-Cal managed care plan serving Riverside and San Bernardino counties. Connects members to network SUD providers. Free services for IEHP members.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: false,
    acceptsRBH: false,
    priceRange: "Free for IEHP members",
    servicesOffered: JSON.stringify(["Assessment", "Linkage to Treatment", "Care Coordination", "Network Providers"]),
    amenities: JSON.stringify(["Member Services", "Spanish Services", "Transportation Assistance"]),
    isJointCommission: false,
    latitude: "34.1064",
    longitude: "-117.5931",
    isVerified: true,
    isPublished: true,
  },
];

async function seedExpansionCenters() {
  console.log("Seeding treatment centers from Orange, San Diego, and Riverside counties...\n");
  
  let orangeCount = 0;
  let sanDiegoCount = 0;
  let riversideCount = 0;
  
  for (const center of expansionCenters) {
    try {
      await db.insert(treatmentCenters).values(center);
      console.log(`âœ“ Added: ${center.name} (${center.city})`);
      
      if (center.city.includes("Santa Ana") || center.city.includes("Aliso Viejo") || center.city.includes("Fullerton")) {
        orangeCount++;
      } else if (center.city.includes("San Diego")) {
        sanDiegoCount++;
      } else if (center.city.includes("Riverside") || center.city.includes("Rancho Cucamonga")) {
        riversideCount++;
      }
    } catch (error) {
      console.log(`âœ— Skipped (may already exist): ${center.name}`);
    }
  }
  
  console.log(`\nðŸ“Š Summary:`);
  console.log(`   Orange County: ${orangeCount} centers`);
  console.log(`   San Diego County: ${sanDiegoCount} centers`);
  console.log(`   Riverside County: ${riversideCount} centers`);
  console.log(`   Total: ${orangeCount + sanDiegoCount + riversideCount} new centers added`);
  console.log("\nTreatment directory expansion complete!");
  process.exit(0);
}

seedExpansionCenters().catch((error) => {
  console.error("Error seeding expansion centers:", error);
  process.exit(1);
});
