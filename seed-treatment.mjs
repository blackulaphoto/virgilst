import { drizzle } from "drizzle-orm/mysql2";
import { treatmentCenters } from "./drizzle/schema.ts";
import dotenv from "dotenv";

dotenv.config();

const db = drizzle(process.env.DATABASE_URL);

const sampleCenters = [
  {
    name: "LA County Substance Abuse Treatment Access (SASH)",
    type: "outpatient",
    address: "Various Locations",
    city: "Los Angeles",
    zipCode: "90001",
    phone: "1-844-804-7500",
    website: "https://publichealth.lacounty.gov/sapc/",
    description: "24/7 helpline connecting you to treatment providers. Drug Medi-Cal certified. No wrong door policy - they'll help you find the right level of care.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: false,
    priceRange: "Free with Medi-Cal",
    servicesOffered: JSON.stringify(["Assessment", "Linkage to Treatment", "MAT", "Counseling"]),
    amenities: JSON.stringify(["24/7 Hotline", "150+ Languages"]),
    isJointCommission: false,
    latitude: "34.0522",
    longitude: "-118.2437",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Tarzana Treatment Centers",
    type: "residential",
    address: "18646 Oxnard Street",
    city: "Tarzana",
    zipCode: "91356",
    phone: "(818) 996-1051",
    website: "https://www.tarzanatc.org/",
    description: "Comprehensive residential treatment with detox, residential, and outpatient services. Accepts Medi-Cal and has programs for women with children.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Covered by Medi-Cal",
    servicesOffered: JSON.stringify(["Detox", "Residential", "Outpatient", "MAT", "Mental Health"]),
    amenities: JSON.stringify(["Women with Children Program", "Dual Diagnosis", "Trauma-Informed Care"]),
    isJointCommission: true,
    latitude: "34.1686",
    longitude: "-118.5391",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Prototypes Women's Center",
    type: "residential",
    address: "5601 W. Slauson Ave",
    city: "Culver City",
    zipCode: "90230",
    phone: "(310) 641-7795",
    website: "https://www.prototypes.org/",
    description: "Women-only residential treatment center. Accepts pregnant and parenting women. Medi-Cal certified.",
    servesPopulation: "women_with_children",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Free with Medi-Cal",
    servicesOffered: JSON.stringify(["Residential", "Outpatient", "Childcare", "Parenting Classes", "Job Training"]),
    amenities: JSON.stringify(["Childcare On-Site", "Trauma-Informed", "Peer Support"]),
    isJointCommission: true,
    latitude: "33.9898",
    longitude: "-118.3892",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Clare Foundation",
    type: "sober_living",
    address: "1028 N. Highland Ave",
    city: "Los Angeles",
    zipCode: "90038",
    phone: "(310) 314-6200",
    website: "https://www.clarefoundation.org/",
    description: "Sober living homes and outpatient services. Accepts Medi-Cal for outpatient. Sober living is self-pay but affordable.",
    servesPopulation: "coed",
    acceptsCouples: true,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: false,
    priceRange: "$800-$1200/month for sober living",
    servicesOffered: JSON.stringify(["Sober Living", "Outpatient", "IOP", "Alumni Support"]),
    amenities: JSON.stringify(["12-Step Meetings", "Case Management", "Job Assistance"]),
    isJointCommission: false,
    latitude: "34.0928",
    longitude: "-118.3387",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Behavioral Health Services (BHS) - LA County",
    type: "outpatient",
    address: "Multiple SPA Locations",
    city: "Los Angeles",
    zipCode: "90001",
    phone: "1-800-854-7771",
    website: "https://dmh.lacounty.gov/",
    description: "LA County mental health and substance use services. Free for uninsured, Medi-Cal accepted. Walk-in assessment available at all SPAs.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: true,
    acceptsPrivateInsurance: false,
    acceptsRBH: false,
    priceRange: "Free",
    servicesOffered: JSON.stringify(["Assessment", "Outpatient", "MAT", "Case Management", "Crisis Services"]),
    amenities: JSON.stringify(["Walk-In Welcome", "No Insurance Required", "Peer Support"]),
    isJointCommission: false,
    latitude: "34.0522",
    longitude: "-118.2437",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Beit T'Shuvah",
    type: "residential",
    address: "8831 Venice Blvd",
    city: "Los Angeles",
    zipCode: "90034",
    phone: "(310) 204-5200",
    website: "https://www.beittshuvah.org/",
    description: "Jewish-based residential treatment center. Accepts all faiths. Medi-Cal certified. Known for holistic approach combining spirituality and clinical treatment.",
    servesPopulation: "coed",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: false,
    priceRange: "Covered by Medi-Cal or $30,000-$40,000",
    servicesOffered: JSON.stringify(["Residential", "Outpatient", "Dual Diagnosis", "Spiritual Counseling"]),
    amenities: JSON.stringify(["Kosher Meals", "Yoga", "Art Therapy", "Alumni Network"]),
    isJointCommission: true,
    latitude: "34.0195",
    longitude: "-118.3912",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Exodus Recovery - Men's Sober Living",
    type: "sober_living",
    address: "Various Locations",
    city: "Los Angeles",
    zipCode: "90019",
    phone: "(323) 933-0451",
    website: "https://www.exodusrecovery.com/",
    description: "Men-only sober living homes throughout LA. Affordable rates, structured environment, 12-step focus.",
    servesPopulation: "men",
    acceptsCouples: false,
    acceptsMediCal: false,
    acceptsMedicare: false,
    acceptsPrivateInsurance: false,
    acceptsRBH: true,
    priceRange: "$600-$900/month",
    servicesOffered: JSON.stringify(["Sober Living", "12-Step Meetings", "Drug Testing", "Case Management"]),
    amenities: JSON.stringify(["Furnished Rooms", "Shared Kitchen", "Transportation Assistance"]),
    isJointCommission: false,
    latitude: "34.0522",
    longitude: "-118.2437",
    isVerified: true,
    isPublished: true,
  },
  {
    name: "Shields for Families - Women & Children",
    type: "residential",
    address: "1329 E. 103rd Street",
    city: "Los Angeles",
    zipCode: "90002",
    phone: "(323) 242-5000",
    website: "https://www.shieldsforfamilies.org/",
    description: "Residential treatment for women and children. Medi-Cal certified. Comprehensive services including childcare, parenting, job training.",
    servesPopulation: "women_with_children",
    acceptsCouples: false,
    acceptsMediCal: true,
    acceptsMedicare: false,
    acceptsPrivateInsurance: true,
    acceptsRBH: true,
    priceRange: "Free with Medi-Cal",
    servicesOffered: JSON.stringify(["Residential", "Childcare", "Parenting", "Job Training", "Mental Health"]),
    amenities: JSON.stringify(["On-Site Childcare", "Family Therapy", "Educational Support"]),
    isJointCommission: false,
    latitude: "33.9425",
    longitude: "-118.2468",
    isVerified: true,
    isPublished: true,
  },
];

async function seedTreatmentCenters() {
  console.log("Seeding treatment centers...");
  
  for (const center of sampleCenters) {
    try {
      await db.insert(treatmentCenters).values(center);
      console.log(`✓ Added: ${center.name}`);
    } catch (error) {
      console.log(`✗ Skipped (may already exist): ${center.name}`);
    }
  }
  
  console.log("\nTreatment centers seeded successfully!");
  process.exit(0);
}

seedTreatmentCenters().catch((error) => {
  console.error("Error seeding treatment centers:", error);
  process.exit(1);
});
